---
title: "Reproducible Research: Peer Assessment 1"
date: "`r Sys.Date()`"
output: 
    html_document: 
        keep_md: true
---
## Documenting the current environment

I know this was not part of the template for this assignment, but Prof Peng 
mentions in the week 3 lectures that part of the Reproducible Research workflow 
is to document the environment that the analysis is run in (just in case there 
are issues that relate to a specific version).  

I have therefore put in this 
section to remind myself later how to do this...

```{r session_info}
# first load the required libraries
library(dplyr)

# then generate the snapshot of the environment used
sessionInfo()
```

## Loading and preprocessing the data

Need to unzip the supplied file, read it into memory, and then clean up the
unzipped files.

```{r read_data}
unzip("activity.zip", exdir = "unzipped")
activity <- read.csv("unzipped/activity.csv")
file.remove(c(list.files(path = "unzipped", recursive = TRUE, full.names = TRUE),
                      "unzipped"))
```

## What is mean total number of steps taken per day?

There are a lot of NA's in the step count:
```{r display_na}
str(activity)
```
I will therefore remove the NA's before calculating the daily total step count:
```{r daily_totals}
daily_totals <- activity %>% group_by(date) %>% na.omit %>% summarise(total = sum(steps))
daily_totals
```
This allows me to plot the required histogram:
```{r daily_totals_hist}
hist(daily_totals$total, breaks=25L, col="dark blue", 
     main="Frequency distribution of the total number of steps per day")
```

The mean number of steps per day is `r format(mean(daily_totals$total), scientific=F, big.mark=",")` steps.  

The median number of steps per day is `r format(median(daily_totals$total), scientific=F, big.mark=",")` steps.  

## What is the average daily activity pattern?

In order to answer this part, the steps are fairly similar to the one above, 
except that I need to group by the interval, and summarise by taking the mean:

```{r activity_pattern, fig.width=10, fig.height=7}
activity_pattern <- activity %>% group_by(interval) %>% na.omit %>% summarise(average_steps = mean(steps))

plot(activity_pattern$interval, activity_pattern$average_steps, 
     type="l", col="blue",
     main="Average level of activity during the day",
     xlab="5 min time interval\n(number denotes how many minutes after midnight this interval starts)",
     ylab="Average number of steps taken during the given 5 minute interval")
```


## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
